<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Intermolecular Forces â€” Water Simulation</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>Water Molecules & Intermolecular Forces</h1>
      <p class="subtitle">Canvas simulation with green dotted SVG lines for attractions</p>
    </header>

    <section class="controls">
      <div class="temp-control">
        <label for="tempRange">Temperature (Â°C):
          <output id="tempCLabel">0</output>
          <span class="kelvin">(<span id="tempKLabel">273.15</span> K)</span>
        </label>
  <input id="tempRange" type="range" min="-273.15" max="500" value="25" step="0.1" />
      </div>

      <div class="phase-indicator" id="phaseIndicator" aria-live="polite">Liquid</div>

      <div class="phase-buttons">
        <button id="freezeBtn" type="button">Freeze â„ï¸</button>
        <button id="meltBtn" type="button">Melt ğŸ’§</button>
        <button id="boilBtn" type="button">Boil â™¨ï¸</button>
        <button id="condenseBtn" type="button">Condense â˜ï¸</button>
        <button id="saltBtn" type="button">Add salt ğŸ§‚</button>
        <button id="toggleHeatPanel" type="button">Show latent graph</button>
      </div>
    </section>

    <section class="legend">
      <strong>Key:</strong>
      <span class="key-item">
        <span class="ball ball-o"></span> Oxygen (O)
      </span>
      <span class="key-item">
        <span class="ball ball-h"></span> Hydrogen (H)
      </span>
      <span class="key-item">
        <svg width="28" height="14" viewBox="0 0 28 14" aria-hidden="true">
          <line x1="0" y1="7" x2="28" y2="7" stroke="#1db954" stroke-width="2" stroke-dasharray="4 4" />
        </svg>
        Intermolecular attraction
      </span>
      <label class="toggle-bonds"><input id="toggleBonds" type="checkbox" checked /> Show bonds</label>
    </section>

    <main class="sim-wrap">
      <div class="sim-container" id="simContainer">
        <canvas id="simCanvas" width="960" height="560"></canvas>
        <svg id="imfOverlay" class="overlay" width="960" height="560" xmlns="http://www.w3.org/2000/svg"></svg>
  <div id="trendIndicator" class="trend-indicator" aria-hidden="true"></div>
        <div id="phaseLabel" class="phase-overlay" hidden></div>
      </div>
      <section class="metrics" aria-live="polite">
        Avg bond duration: <output id="avgBondDuration"></output> s  Active bonds: <output id="activeBonds">0</output>
      </section>

      <!-- Heat vs Temperature chart for latent heat demonstration -->
      <aside class="heat-panel">
        <h2>Heat added vs Temperature</h2>
        <div class="heat-controls">
          <div class="heat-readouts">
            <label>Heat added: <output id="heatQ">0</output> kJ</label>
            <label>Temperature (Â°C): <output id="heatT">25.0</output> </label>
          </div>
          <div class="heat-buttons">
            <button id="addHeat">Add 1 kJ</button>
            <button id="removeHeat">Remove 1 kJ</button>
            <button id="resetHeat">Reset</button>
            <!-- Y-axis translation controls -->
            <label class="latent-toggle" title="Shift chart Y-axis">
              Shift Y: <input id="yAxisShift" type="number" value="0" step="5" style="width:64px;margin-left:6px;" />
            </label>
            <button id="yAxisShiftApply" type="button">Apply</button>
            <button id="yAxisShiftReset" type="button">Reset Y</button>
          </div>
        </div>
        <div class="chart-wrap">
          <canvas id="heatChart" width="480" height="220" aria-label="Heat vs Temperature chart"></canvas>
        </div>
        <p class="hint">Drag the temperature slider or use the buttons to add/remove heat and observe latent heat plateaus at melting and boiling.</p>
      </aside>
    </main>

    <footer class="app-footer">
      <small>Tip: Drag the temperature slider from absolute zero (-273 Â°C) up to 500 Â°C. Phase is estimated at 1 atm (Ice â‰¤ 0 Â°C, Liquid 0â€“100 Â°C, Gas â‰¥ 100 Â°C).</small>
    </footer>

    <script src="main.js"></script>
  </body>
  </html>
